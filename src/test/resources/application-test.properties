# Test profile configuration
# This profile is used for running tests
# Uses H2 in-memory database by default, but can be overridden with environment variables for CI/CD

# Database configuration - defaults to H2 for local testing, overridden by env vars in CI/CD
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:testdb;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER:org.h2.Driver}

# JPA configuration for tests
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.database-platform=${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.H2Dialect}

# Disable unnecessary features for tests
spring.jpa.open-in-view=false

# JWT configuration (same as main)
app.jwt.secret=23b73933d4b6588568f142cd423b9c0e
app.jwt.expiration=86400000

# Logging
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN
logging.level.com.udea.CourierSync=INFO

